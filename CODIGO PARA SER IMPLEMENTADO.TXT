INICIO DE SESION LO QUE ESTA COMENTADO)

app.post("/inicioSesion", async (req, res) => {
  // console.log(req.body);
  const { email, password } = req.body;
  console.log(email, password);
  if(!email || !password) return res.status(400).json(({error: 'Faltan parametros'}))    
    const usuario = await trae_usuario(email, password);
    console.log(usuario.id,usuario.sector, usuario.nombre,usuario.email, usuario.rut, usuario.id_rol, usuario.password, usuario.is_active, usuario.foto);
         
    if(!usuario) {
        res.status(404).send({
            error: 'Este usuario no se ha registrado',
            code: 404,
    }); 

    }if (usuario.is_active !== 1) {        
        res.status(401).send({
        error: 'Este usuario se encuentra en evaluacion',
        code: 401,
        });               
                         
    } else {

      
        // const usuario_id = await trae_contrasena_encriptada(email);           
        // contrasena_encriptada = usuario_id.password;    
        // const compara_contrasena = await compara(password_tutor, password_encriptada); 
        
        // if (compara_contrasena === false) {
        //     res.status(401).send({
        //         error: 'Credenciales incorrectas',
        //         code: 401,
        //     });
        // }
        // const usuario = await trae_usuario(email, password_encriptada);        
        // const token = await genera_token(usuario);
        // res.cookie('retoken', token, {httpOnly: true});
        res.render("perfil",{
          id: usuario.id,
          sector: usuario.sector,
          nombre: usuario.nombrep, 
          email: usuario.email,
          rut: usuario.rut,
          id_rol: usuario.id_rol,
          password: usuario.password,
          is_active: usuario.is_active,
          foto: usuario.foto
        });

    } 

  // res.send("aqui");
});


//////////////////////////LO COMENTADO PARA ENCRIPTAR////////////////////////////
const { 
  registrarUsuario,
  getDate,
  muestra_usuarios, 
  muestra_inventario, 
  encuentra_producto,
  trae_usuario
} = require("./database");

// AUN NO LAS PUEDO ACTIVAR/////

// const  { encripta, compara }  = require('./encriptador');
// const { genera_token, verifica_token } = require('./verificadorToken');
// const { cookie } = require('./cookie');